<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            margin: 0px;
        }
        #wrapper{
            width: 1400px;
            height: 650px;
            background-color: antiquewhite;
            margin: auto;
        }
        #aside_regist{
            width: 200px;
            height: 100%;
            float: left;
            background-color: aqua;
        }
        #aside_regist *{
            width: 85%;
            margin: 0px 3px;
        }
        #content{
            width: 1000px;
            height: 100%;
            float: left;
            background-color:cornflowerblue;
        }
        #aside_detail{
            width: 200px;
            height: 100%;
            float: left;
            background-color: cadetblue;
        }
    </style>
    <script>
        //ES6(2015) 부터 등장한 class가 나오기 이전 시대에는 js에서 객체를 정의하는 방법인 
        // 함수의 생성자, 객체리터럴에 의한 객체 정의법도 고전적으로 지원이 되었었음.
        // ex) key-value 쌍으로 이루어짐
        /*
        클래스에 의한 객체 정의는 자체가 사용할 수 있는 객체가 아니라, 거푸집이므로 사용하려면
        반드시 인스턴스화 과정이 필요하다. 결국 클래스의 사용 목적은 '재정의'
        class Obj{

        }
        아래의 객체리터럴에 의한 객체 정의는 클래스가 아니라 자체가 인스턴스이다.
        거푸집이 없기 때문에, 객체를 10개 정의하려면 아래의 코드를 10번 작성해야 함.
        주 용도는 재사용을 위한 객체가 아니라 데이터를 담기 위한 목적으로 많이 사용됨
        let obj = {
            name: "king",
            age: 30,
            move: function(){}
        }

        객체지향 기술을 사용하기 이전에는 현실의 사물, 즉 객체를 담을때는 주로 1차원 배열을 이용했다.
        ex) ["Scott", 30, "서울"]
        직관성이 떨어지며 객체를 표현했다고 보기에 부족하다.
        oop언어는 객체를 표현한 언어이기 때문에 일차원 배열 대신, 객체리터럴 표현이 가능함, 따라서 index를 통해
        접근하기 보다는 직관성 있는 단어를 이용하기 때문에 현실 반영에 있어 훨씬 효율적임
        */

        var storeList=[];
        let map;

        //구글 맵이 로드가 완료되는 시점에 개발자가 미리 정의해놓은 함수를 호출(콜백함수)
        function initMap(){
            //맵에 적용할 속성
            var mapProp= {
                center: new google.maps.LatLng(37.50966, 127.0555),
                zoom: 16,
            };
            map = new google.maps.Map(document.getElementById("content"),mapProp);
        }

        //맛집 하나를 등록하려면, 객체 한개가 필요하므로, js객체 리터럴을 사용
        function regist(){
            let store = {
                store_name: document.getElementById("store_name").value,
                tel: document.getElementById("tel").value,
                pos: document.getElementById("pos").value
            };
            //한개의 상점을 배열에 담기
            storeList.push(store);
            console.log(storeList);

            //상점 정보 중 위도, 경도를 이용하여 마커 띄우기
            //ES6에서 var 대신 let, const 권장
            let latLon = store.pos.split(",");
            let pos = new google.maps.LatLng(parseFloat(latLon[0]), parseFloat(latLon[1]));
            let marker = new google.maps.Marker({
                position: pos,
                animation:google.maps.Animation.BOUNCE,
                icon: {
                    url: "../../images/map/smile.png",
                    scaledSize: new google.maps.Size(45, 45)
                }
            });

            marker.setMap(map);
            
        }

        //지금까지 누적된 가게들의 목록을 새창으로 보여주기
        function getList(){
            window.open("list.html", "_blank", "width=550px, height=500px");
        }

        addEventListener("load", function(){
            //등록 버튼
            document.querySelector("#aside_regist :nth-child(7)").addEventListener("click",function(){
                regist();
            });
            //일괄 등록 버튼
            document.querySelector("#aside_regist :nth-child(8)").addEventListener("click",function(){});
            //목록 보기 버튼
            document.querySelector("#aside_regist :nth-child(9)").addEventListener("click",function(){
                getList();
            });
        });
    </script>
</head>
<body>
    <div id="wrapper">
        <div id="aside_regist">
            <input type="text" placeholder="상호명" id="store_name">
            <input type="text" placeholder="연락처" id="tel">
            <input type="text" placeholder="위도, 경도" id="pos">
            <input type="file" id="profile">
            <div id="preview">사진 미리보기 영역</div>
            <select name="" id="icon">
                <option value="">스마일</option>
                <option value="">핀</option>
                <option value="">하트</option>
                <option value="">별</option>
                <option value="">깃발</option>
            </select>
            <button>등록</button>
            <button>일괄등록</button>
            <button>목록보기</button>
        </div>
        <div id="content"></div>
        <div id="aside_detail"></div>
    </div>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaViAtzIHgeGFoRW5akXXn9hx60opigWg&callback=initMap"></script>
</body>
</html>